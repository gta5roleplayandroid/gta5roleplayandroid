<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Thinkmay Cloud Gate</title>

<style>
body.locked{
  overflow:hidden;
  pointer-events:none;
}

#gate{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.85);
  display:flex;
  justify-content:center;
  align-items:center;
  z-index:9999;
}

#popup{
  width:360px;
  background:#05070c;
  border-radius:22px;
  padding:22px;
  text-align:center;
  color:#cfffff;
  box-shadow:0 0 35px #00f0ff;
  pointer-events:auto;
}

#popup img{
  width:80px;
  border-radius:50%;
  margin-bottom:10px;
}

#popup h3{
  margin:6px 0;
  font-size:18px;
}

#popup p{
  font-size:13px;
  opacity:.85;
}

.btn{
  display:block;
  width:100%;
  padding:12px;
  margin-top:10px;
  border:none;
  border-radius:12px;
  font-size:15px;
  font-weight:bold;
  cursor:pointer;
}

.tiktok{background:linear-gradient(90deg,#00f2ea,#ff0050);color:#000;}
.discord{background:#5865F2;color:#fff;}

input{
  width:100%;
  padding:11px;
  margin-top:12px;
  border-radius:10px;
  border:none;
  text-align:center;
  font-size:14px;
}

#status{
  margin-top:8px;
  font-size:13px;
  color:#ff6b6b;
}
</style>
</head>

<body class="locked">

<!-- POPUP TOKEN -->
<div id="gate">
  <div id="popup">
    <img src="https://i.imgur.com/Z8mF7Z6.png">
    <h3>Aplikasi by</h3>
    <p>TikTok @gta5roleplaydihandphone</p>
    <p>Ready Akun Steam GTA 5 Original / Rockstar<br>
       Berlicense atau Berlangganan Cloud Thinkmay</p>

    <button class="btn tiktok" onclick="window.open('https://tiktok.com','_blank')">Follow TikTok</button>
    <button class="btn discord" onclick="window.open('https://discord.gg','_blank')">Join Discord</button>

    <!-- INPUT TOKEN -->
    <input id="token" placeholder="MASUKKAN TOKEN AKSES">
    <button class="btn" onclick="login()">MASUK</button>
    <div id="status"></div>
  </div>
</div>

<!-- ISI WEBSITE THINKMAY -->
<iframe id="app" src="https://thinkmay.net"
 style="width:100%;height:100vh;border:none;display:none"></iframe>

<script>
const API = "https://tokengta5.lmore000013.workers.dev";

function lock(){
  document.body.classList.add("locked");
  document.getElementById("gate").style.display="flex";
  document.getElementById("app").style.display="none";
}

function unlock(){
  document.body.classList.remove("locked");
  document.getElementById("gate").style.display="none";
  document.getElementById("app").style.display="block";
}

async function login(){
  const t = token.value.trim();
  if(!t) return;

  status.innerText="Verifikasi token...";

  try{
    const r = await fetch(API,{
      method:"POST",
      headers:{ "Content-Type":"application/json" },
      body:JSON.stringify({ token:t })
    });
    const j = await r.json();

    if(j.ok){
      localStorage.setItem("session",JSON.stringify(j));
      unlock();
      monitor();
    }else{
      status.innerText="TOKEN SALAH / EXPIRED";
    }
  }catch{
    status.innerText="SERVER ERROR";
  }
}

function monitor(){
  const s = JSON.parse(localStorage.getItem("session")||"null");
  if(!s) return lock();

  const check = setInterval(()=>{
    if(Date.now()>s.exp){
      clearInterval(check);
      localStorage.removeItem("session");
      alert("‚è∞ WAKTU HABIS");
      lock();
    }
  },3000);
}

(function(){
  const s = JSON.parse(localStorage.getItem("session")||"null");
  if(s && Date.now()<s.exp){
    unlock();
    monitor();
  }else{
    lock();
  }
})();
</script>

</body>
</html>
