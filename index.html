<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Thinkmay Access Gate</title>

<style>
*{box-sizing:border-box;font-family:Arial,Helvetica,sans-serif}

body{
  margin:0;
  background:#000;
}

body.locked{
  overflow:hidden;
}

/* ===== OVERLAY ===== */
#gate{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.85);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:99999;
}

/* ===== POPUP ===== */
#popup{
  width:360px;
  background:#05070c;
  border-radius:22px;
  padding:24px;
  text-align:center;
  color:#e8ffff;
  box-shadow:0 0 35px #00f0ff;
}

/* LOGO */
#popup img{
  width:90px;
  height:90px;
  border-radius:50%;
  object-fit:cover;
  margin-bottom:12px;
}

/* TEXT */
#popup h3{
  margin:6px 0;
  font-size:18px;
}

#popup p{
  font-size:13px;
  opacity:.85;
  line-height:1.4;
}

/* BUTTON */
.btn{
  width:100%;
  padding:12px;
  margin-top:10px;
  border:none;
  border-radius:14px;
  font-size:15px;
  font-weight:bold;
  cursor:pointer;
}

.tiktok{
  background:linear-gradient(90deg,#00f2ea,#ff0050);
  color:#000;
}

.discord{
  background:#5865F2;
  color:#fff;
}

.login{
  background:#00f0ff;
  color:#000;
}

/* INPUT */
#token{
  width:100%;
  padding:12px;
  margin-top:14px;
  border-radius:12px;
  border:none;
  outline:none;
  text-align:center;
  font-size:14px;
}

/* STATUS */
#status{
  margin-top:10px;
  font-size:13px;
  min-height:18px;
}

.ok{color:#2cff8f}
.err{color:#ff6b6b}

/* IFRAME */
#app{
  width:100%;
  height:100vh;
  border:none;
  display:none;
}
</style>
</head>

<body class="locked">

<!-- ===== POPUP TOKEN ===== -->
<div id="gate">
  <div id="popup">
    <!-- GANTI LOGO DI SINI -->
    <img src="https://i.imgur.com/Z8mF7Z6.png" alt="logo">

    <h3>Aplikasi by</h3>
    <p>
      TikTok @gta5roleplaydihandphone<br>
      Ready Akun Steam GTA 5 Original / Rockstar<br>
      Berlicense atau Berlangganan Cloud Thinkmay
    </p>

    <button class="btn tiktok"
      onclick="window.open('https://tiktok.com','_blank')">
      Follow TikTok
    </button>

    <button class="btn discord"
      onclick="window.open('https://discord.gg','_blank')">
      Join Discord
    </button>

    <!-- TOKEN -->
    <input id="token" placeholder="MASUKKAN TOKEN AKSES">
    <button class="btn login" onclick="login()">MASUK</button>

    <div id="status"></div>
  </div>
</div>

<!-- ===== THINKMAY ===== -->
<iframe id="app" src="https://thinkmay.net"></iframe>

<script>
const API = "https://tokengta5.lmore000013.workers.dev";

function lock(){
  document.body.classList.add("locked");
  gate.style.display="flex";
  app.style.display="none";
}

function unlock(){
  document.body.classList.remove("locked");
  gate.style.display="none";
  app.style.display="block";
}

async function login(){
  const t = token.value.trim();
  status.textContent="";
  status.className="";

  if(!t){
    status.textContent="⚠️ Token belum diisi";
    status.className="err";
    return;
  }

  status.textContent="⏳ Verifikasi token...";

  try{
    const r = await fetch(API,{
      method:"POST",
      headers:{ "Content-Type":"application/json" },
      body:JSON.stringify({ token:t })
    });

    const j = await r.json();

    if(j.ok){
      status.textContent="✅ Token diterima";
      status.className="ok";
      localStorage.setItem("session",JSON.stringify(j));
      setTimeout(()=>{
        unlock();
        monitor();
      },600);
    }else{
      status.textContent="❌ Token salah / expired";
      status.className="err";
    }
  }catch{
    status.textContent="❌ Server error";
    status.className="err";
  }
}

function monitor(){
  const s = JSON.parse(localStorage.getItem("session")||"null");
  if(!s) return lock();

  const timer = setInterval(()=>{
    if(Date.now() > s.exp){
      clearInterval(timer);
      localStorage.removeItem("session");
      alert("⏰ WAKTU AKSES HABIS");
      lock();
    }
  },3000);
}

/* AUTO CHECK SAAT REFRESH */
(function(){
  const s = JSON.parse(localStorage.getItem("session")||"null");
  if(s && Date.now() < s.exp){
    unlock();
    monitor();
  }else{
    lock();
  }
})();
</script>

</body>
</html>
